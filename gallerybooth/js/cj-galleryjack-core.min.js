(function(b){b.cjBgSlideshow=function(f,nb){function wc(a){"undefined"!==typeof Ma&&clearTimeout(Ma);ta();ob&&(0===F?g&&(g.unbind("load",ua).attr("src","").remove(),g=null):m&&(m.unbind("load",ua).attr("src","").remove(),m=null),ob=!1);Y=fa=!1;t?pb(a.value):pb();xc?(Wb(),xc=!1):(yc(),Ma=setTimeout(Wb,750))}function O(a){"undefined"!==typeof Ma&&clearTimeout(Ma);ta();yc();t?pb(a.value):pb();Wb()}function pb(a){t&&(a=a.split("//").join("/"),"/"!==a?(a=a.split("/"),3===a.length?(c=parseInt(a[2],10)- 1,z=a[1]):isNaN(a[1])?(c=0,z=a[1]):(c=parseInt(a[1],10)-1,z="")):(z="/",c=0));!Xb&&P?zc(c):Xb=!1}function Wb(){var a;if(t)if(Na=e,"/"!==z&&""!==z)for(a=ga;a--;){if(ha[a]===z){e=a;break}}else e=0;if(G)for(a=ga;a--;)a!==e?ia[a].css({opacity:Ac,cursor:"pointer"}):ia[e].css({opacity:1,cursor:"default"});Oa&&Oa.fadeIn(300);if(Na!==e||!Bc){va=Cc[e];Bc=!0;Z=qb[e];wa=Dc[e];xa=Yb[e];ya=Ec[e];ja=Fc[e];$=Gc[e];Pa=Hc[e];q=Z.length;za=q-1;if(vd){a=[];var d=[],h=[],Zb=[],j=[],k=[],f=[],i,g;for(i=0;i<q;i++)a[i]= Z[i],d[i]=wa[i],h[i]=xa[i],Zb[i]=ya[i],j[i]=ja[i],k[i]=$[i],f[i]=Pa[i];Z=[];wa=[];xa=[];ya=[];ja=[];$=[];for(Pa=[];0<a.length;)i=Math.random()*a.length|0,g=Z.length,Z[g]=a[i],wa[g]=d[i],xa[g]=h[i],ya[g]=Zb[i],ja[g]=j[i],$[g]=k[i],Pa[g]=f[i],a.splice(i,1),d.splice(i,1),h.splice(i,1),Zb.splice(i,1),j.splice(i,1),k.splice(i,1),f.splice(i,1)}c>za&&(c=0);G&&(Qa=ia[e].data("stretch"),$b=ia[e].data("center"));P&&(ka=ac[e].width,rb=ac[e].height);w.css("left",n);x.css("left",n);sb&&sb();if(null!==r){for(;r.length;)la[0].unbind("load", Ic).attr("src","").unbind("mousemove",Ra),Q[0].stop(!0,!0).empty(),r[0].unbind("mouseover",tb).unbind("mouseout",ub).removeData("id").empty(),r.shift(),la.shift(),Q.shift();H.stop(!0,!0).empty();bc=!1;Sa&&K.stop(!0,!0).css("display","none");Q=la=r=null}cc&&Jc()}else Aa&&Kc(!0,!1);Lc?Mc(Z[c]+"?img="+(new Date).getTime().toString()):Mc(Z[c]);vb&&(aa.length&&aa.unbind("click",wb),b.data(R,"cjInfoOn")&&Ta.stop(!0,!0).fadeOut(300))}function Mc(a){ob=!0;0===F?(w.css("z-index",parseInt(x.css("z-index"), 10)+1),g=b("<img />").attr("id","cj-img-one").css({display:"none",position:xb}).addClass("cj-no-select").one("load",ua).appendTo(w),g.attr("src",a)):(x.css("z-index",parseInt(w.css("z-index"),10)+1),m=b("<img />").attr("id","cj-img-two").css({display:"none",position:xb}).addClass("cj-no-select").one("load",ua).appendTo(x),m.attr("src",a));yb&&yb()}function ua(a){a.stopPropagation();ob=!1;0===F?(Ua=g.width()||g[0].width,Va=g.height()||g[0].height,F=1):(Ua=m.width()||m[0].width,Va=m.height()||m[0].height, F=0);Oa&&Oa.fadeOut(300);Nc();zb=!0;if(Oc)Oc=!1,g.fadeIn(I,S);else if(0===va)Qa||Pc(),1===F?g.fadeIn(I,S):m.fadeIn(I,S);else if(fa?Y&&(ma=Ab===za&&0===c?!0:0===Ab&&c===za?!1:c>Ab?!0:!1):ma=!0,3!==va){var b;ma?(a=1,b=-1):(a=-1,b=1);1===F?(w.css("left",j*a+n),g.css("display","block"),1===va&&x.animate({left:j*b+n},I),w.animate({left:n},I,S)):(x.css("left",j*a+n),m.css("display","block"),1===va&&w.animate({left:j*b+n},I),x.animate({left:n},I,S))}else a=j+n,ma?1===F?g.css({clip:"rect(0px, "+a+"px, "+ k+"px, "+a+"px)",display:"block"}).animate({clip:"rect(0px, "+a+"px, "+k+"px, 0px)"},I,S):m.css({clip:"rect(0px, "+a+"px, "+k+"px, "+a+"px)",display:"block"}).animate({clip:"rect(0px, "+a+"px, "+k+"px, 0px)"},I,S):1===F?g.css({clip:"rect(0px, 0px, "+k+"px, 0px)",display:"block"}).animate({clip:"rect(0px, "+a+"px, "+k+"px, 0px)"},I,S):m.css({clip:"rect(0px, 0px, "+k+"px, 0px)",display:"block"}).animate({clip:"rect(0px, "+a+"px, "+k+"px, 0px)"},I,S);Ab=c}function ta(){Bb&&("undefined"!==typeof Cb&& clearInterval(Cb),u&&(u.closePath(),u.clearRect(0,0,51,51),u=null),null!==L&&(L.remove(),L=null),Ba=null);Db&&clearTimeout(Db)}function Pc(){1===F?m&&(m.unbind("load",ua).attr("src","").stop(!0,!0).remove(),m=null):g&&(g.unbind("load",ua).attr("src","").stop(!0,!0).remove(),g=null)}function S(){zb=!1;(0!==va||Qa)&&Pc();null===r&&!Qc&&(Eb&&P?cc||(Jc(),cc=!0):Eb&&(Rc(),Fb=!1,G&&Gb.addClass("cj-no-thumbnails"),o.css({display:"none",visibility:"visible"}).fadeIn(300)),Qc=!0);var a;""===$[c]?a=!1:(M.stop(!0, !0).css({cursor:"pointer",top:Ca-Sc+T,left:U-Tc+n}).click(Da).fadeIn(300),a=Hb=!0);ta();var d,h=!0,g;if(G)for(d=ga;d--;)d!==e&&ia[d].mouseover(Uc).mouseout(Vc).click(Wc);if(1<q){if(null!==r)for(d=q;d--;)d!==c&&r[d].click(dc);ec&&(Wa.click(fc),Xa.click(Ya));J&&(Bb&&P?(null===L&&(L=b("<canvas />")),L.css({marginLeft:(ka>>1)-26,marginTop:(Ib>>1)-26}).appendTo(Q[c]),Xc()):Db=setTimeout(gc,hc))}a?g=Da:""!==ja[c]?g=Yc:wd?g=Ya:h=!1;h&&Za.css("cursor","pointer").click(g);Zc&&Jb.keydown($c);na=!1;Ea=!0;ad&& (vb&&(b.data(R,"cjInfoOn",!1),wb()),ad=!1);Kb&&Kb();vb&&(""!==b.trim(ya[c])?(bd.html(ya[c]),b.data(R,"cjInfoOn")&&Ta.stop(!0,!0).css("display","none").fadeIn(300),aa.length&&aa.css("cursor","pointer").removeClass("cj-no-info-hover").click(wb)):aa.length&&aa.addClass("cj-no-info-hover").css("cursor","auto"))}function gc(){Y=fa=!1;cd()}function yc(){na=!0;Ea=!1;var a;if(G)for(a=ga;a--;)ia[a].unbind("click",Wc).unbind("mouseover",Uc).unbind("mouseout",Vc);if(null!==r)for(a=q;a--;)r[a].unbind("click", dc);ec&&(Wa.unbind("click",fc),Xa.unbind("click",Ya));Zc&&Jb.unbind("keydown",$c);Za.unbind("click",Ya).unbind("click",Da).unbind("click",Yc).css("cursor","auto");$a()}function Yc(){"_parent"===Pa[c]?window.location=ja[c]:window.open(ja[c]);ab?(J=!0,bb()):(ta(),J=!1,na||(Ea=!0));"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!0)}function Da(a){a.stopPropagation();M.unbind("click",Da).css("cursor","auto");dd=J;ab?(J=!0,bb()):(ta(),J=!1,na||(Ea=!0));ba.css({width:j,height:k}).appendTo(A).fadeIn(500, xd);Lb=!0}function xd(){"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!0);var a=$[c],d=!1;V=cb;-1!==a.search("youtube.com")?a=yd.split("{url}").join(a.split("watch?v=")[1]):-1!==a.search("vimeo.com")?a=zd.split("{url}").join(a.substring(a.lastIndexOf("/"))):-1!==a.search(".mp4")?(d=!0,a=$[c].split(".mp4")[0],db.length&&(db.show(),V+=parseInt(db.css("height"),10))):a=$[c];if(d)oa.length&&"undefined"!==typeof b.cjVideoPlayer&&(oa.appendTo(R),W=b("<video />").attr("id","cj-html-video").attr("width", N).attr("height",cb),d=b.cjVideoPlayer.getValues(),W.html('<object type="application/x-shockwave-flash" data="'+ed+'" width="'+N+'" height="'+(cb+28)+'"><param name="movie" value="'+ed+'" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#000000" /><param name="allowfullscreen" value="true" /><param name="wmode" value="gpu" /><param name="flashvars" value="url='+a+"&vol="+d[0]+"&auto="+d[1]+"&width="+N+"&height="+cb+'" /></object>'),b("<source />").attr("type","video/webm").attr("src", a+".webm").prependTo(W),b("<source />").attr("type","video/ogg").attr("src",a+".ogv").prependTo(W),b("<source />").attr("type","video/mp4").attr("src",a+".mp4").prependTo(W),W.prependTo(oa),pa.appendTo(R).fadeIn(300),Modernizr.video?(d=b.cjVideoPlayer.instance(Mb),Nb=d[0],Ob=d[1]):db.length&&db.hide(),Mb(),qa.resize(Mb),oa.fadeIn(300));else{var d=U-(N>>1)+n,h=Ca-(V>>1)+T;Fa=b("<iframe />").attr("type","text/html").attr("width",N.toString()).attr("height",cb.toString()).attr("frameborder",0).attr("src", a).addClass("cj-video-iframe").css({position:ra?"fixed":"absolute",left:d,top:h}).appendTo(ba);pa.css({top:h+V,left:d+N}).appendTo(A).show()}pa.click($a);ba.click($a)}function Mb(){var a=A.offset(),b=a.left+U-(N>>1),a=a.top+(k>>1)-(V>>1);null!==Ob?Ob()||oa.css({left:b,top:a}):oa.css({left:b,top:a});pa.css({left:b+N,top:a+V})}function $a(a){a?(a.stopPropagation(),a=!0):a=!1;ba.unbind("click",$a);pa.unbind("click",$a).stop(!0,!0);Hb&&(a?M.css("cursor","pointer").click(Da):(M.unbind("click",Da).css("cursor", "auto").fadeOut(250,Ad),Hb=!1));if(Lb&&(a?(null!==Fa&&Fa.empty().remove(),ba.stop(!0,!0).fadeOut(500,Bd)):(ba.stop(!0,!0).css("display","none").empty().detach(),"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!1)),null!==W&&(null!==Nb&&Nb(),W.empty().remove(),qa.unbind("resize",Mb),oa.css("display","none"),Nb=Ob=W=null),Fa=null,pa.hide(),Lb=!1,dd))ab?(J=!1,bb()):(J=!0,fd())}function Ad(){M.hide()}function Bd(){ba.empty().detach();"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!1)} function eb(a,d){null!==a&&(a.stopPropagation(),d=b(this).data("isOpen"));if(Fb){var h=B?s.outerHeight(!0):0,h=-o.outerHeight(!0)+h,c=parseInt(l.css("top"),10);o.css("bottom",h).data("hidden",!0);l.data("top",c);c-=h;l.css("top",c);v.css("top",c);ic&&(X.hide(),sa.show());B&&s.css("display","none").fadeIn(300)}else d?(h=B?s.outerHeight(!0):0,h=-o.outerHeight(!0)+h,o.stop(!0,!0).data("hidden",!0).animate({bottom:h},200),Aa&&(h=l.data("top")-h,l.animate({top:h},200),v.animate({top:h},200)),X.hide(), sa.show()):(o.stop(!0,!0).data("hidden",!1).animate({bottom:0},200),Aa&&(h=l.data("top"),l.animate({top:h},200),v.animate({top:h},200)),sa.hide(),X.show())}function wb(){b.data(R,"cjInfoOn")?(b.data(R,"cjInfoOn",!1),Ta.stop(!0,!0).fadeOut(300)):(b.data(R,"cjInfoOn",!0),Ta.stop(!0,!0).css("display","none").fadeIn(300))}function Uc(){b(this).css("opacity",1)}function Vc(){b(this).css("opacity",Ac)}function Wc(a){a.stopPropagation();fa=!0;Y=!1;ma=!0;na||(t?b.address.value(ha[b(this).data("id")]):(e= b(this).data("id"),c=0,O(),Na=e))}function $c(a){switch(a.keyCode){case 39:Ya();break;case 37:fc();break;case 40:eb(null,!0);break;case 38:eb(null,!1)}}function fc(a){a&&a.stopPropagation();fa=!0;ma=Y=!1;0<c?(c--,t?b.address.value(z.split("/").join("")+"/"+(c+1).toString()):O()):(a=0<e?e-1:catLeg,c=qb[a].length-1,t?b.address.value(ha[a]+"/"+(c+1).toString()):(e=a,O(),Na=e))}function Ya(a){a&&a.stopPropagation();ma=fa=!0;Y=!1;cd()}function cd(){c<za?(c++,t?b.address.value(z.split("/").join("")+"/"+ (c+1).toString()):O()):(c=0,t?b.address.value(ha[e<catLeg?e+1:0]):(e<catLeg?e++:e=0,O(),Na=e))}function bb(a){a&&a.stopPropagation();J?(ta(),ca.hide(),da.show(),J=!1,na||(Ea=!0)):(da.hide(),ca.show(),J=!0,Ea&&fd())}function Jc(){la=[];Q=[];r=[];fb=0;for(var a,d=0;d<q;d++)a=b("<div />").data("id",d).addClass("cj-thumb-div").width(ka).height(rb).appendTo(H),la[d]=b("<img />").addClass("cj-thumb-image").one("load",Ic).appendTo(a),Q[d]=b("<div />").addClass("cj-thumb-hover").css({width:ka,height:rb,opacity:d!== c?0:jc}).appendTo(a),r[d]=a;Ib=a.outerHeight(!0);Ga=a.outerWidth(!0)-ka;ea=ka+Ga;Ga-=parseInt(a.css("borderLeftWidth"),10)<<1;gd=Ga<<1;hd=ea*q;id=(rb>>1)-jd;p=0;kd()&&(kc(),l.fadeIn(300),v.fadeIn(300));o.css("visibility","visible");bc=!0;r[0].addClass("cj-thumb-div-first");la[0].attr("src",xa[0]);o.data("hidden")&&(a=B?s.outerHeight(!0):0,a=-o.outerHeight(!0)+a,d=l.data("top")-a,o.stop(!0,!0).css("bottom",a),l.css("top",d),v.css("top",d));Fb&&(Cd&&(B&&ic)&&eb(null),Fb=!1)}function kc(){l.stop(!0, !0).css("display","block").unbind("click",C).unbind("mouseover",D).unbind("mouseout",E);v.stop(!0,!0).css("display","block").unbind("click",C).unbind("mouseover",D).unbind("mouseout",E);p<q-y?v.css({cursor:"pointer",opacity:1}).mouseover(D).mouseout(E).click(C):v.css({cursor:"auto",opacity:Pb}).removeClass("cj-thumb-arrow-hover");0<p?l.css({cursor:"pointer",opacity:1}).mouseover(D).mouseout(E).click(C):l.css({cursor:"auto",opacity:Pb}).removeClass("cj-thumb-arrow-hover")}function Ic(a){a.stopPropagation(); fb<za&&(fb++,la[fb].attr("src",xa[fb]));a=b(this).parent().data("id");a!==c&&r[a].css("cursor","pointer").mouseover(tb).mouseout(ub).click(dc);b(this).fadeIn(300)}function kd(a){y=(j-80)/ea|0;y=Math.min(y,lc);y=Math.min(y,q);mc=y-1;var b=y*ea+Ga,h=b>>1;H.parent().css("width",b-gd);H.css({width:hd,height:Ib});o.css({left:U-h+n,width:b});B&&s.css({marginLeft:h-nc});Kc(!1,a);if(y<q){a&&kc();if(a=o.data("hidden"))h=B?s.outerHeight(!0):0,o.stop(!0,!0).css("bottom",-o.outerHeight(!0)+h);var c=A.offset(), g=o.offset(),h=H.offset().top-c.top+id+T;l.css({top:h,left:g.left-c.left-ld+n});v.css({top:h,left:g.left-c.left+b+n});Aa=!0;a?(b=B?s.outerHeight(!0):0,l.data("top",h+(-o.outerHeight(!0)+b))):l.data("top",h)}else l.stop(!0,!0).unbind("click",C).unbind("mouseover",D).unbind("mouseout",E).removeClass("cj-thumb-arrow-hover").css("display","none"),v.stop(!0,!0).unbind("click",C).unbind("mouseover",D).unbind("mouseout",E).removeClass("cj-thumb-arrow-hover").css("display","none"),Aa=!1;return Aa}function Kc(a, b){if(b)p=c,0!==c&&c+y>q&&(p=q-y),H.stop(!0,!0).css("marginLeft",p*-ea);else{if(0===c)p=0;else if(c>p+mc)for(;c>p+mc;)p++;a?H.stop(!0).animate({marginLeft:p*-ea},500):H.stop(!0,!0).css("marginLeft",p*-ea)}kc()}function tb(a){a.stopPropagation();b(this).children("div").stop(!0).fadeTo(300,jc);var d=b(this).data("id");if(Sa&&""!==wa[d]){if(ra)Qb=Rb=0;else{var c=A.offset();Rb=c.top;Qb=c.left}K.stop(!0,!0).html(wa[d]);oc=K.outerHeight(!0)+10;pc=K.outerWidth(!0)>>1;K.css({display:"none",top:a.pageY-Rb- oc,left:a.pageX-Qb-pc}).fadeIn(300);b(this).mousemove(Ra)}}function ub(a){a.stopPropagation();b(this).children("div").stop(!0).fadeTo(300,0);Sa&&(b(this).unbind("mousemove",Ra),K.stop(!0,!0).fadeOut(200))}function Ra(a){a.stopPropagation();K.css({top:a.pageY-Rb-oc,left:a.pageX-Qb-pc})}function dc(a){a.stopPropagation();na||((Y=fa=!0,a=b(this).data("id"),zc(a),Sa&&(b(this).unbind("mousemove",Ra),K.stop(!0,!0).fadeOut(200)),Xb=!0,t)?b.address.value(z.split("/").join("")+"/"+(a+1).toString()):(c=a,O()))} function C(a){a.stopPropagation();if(b(this).data("right"))if(p<q-y)p++,p===q-y&&v.unbind("click",C).unbind("mouseover",D).unbind("mouseout",E).removeClass("cj-thumb-arrow-hover").css({cursor:"auto",opacity:Pb}),l.unbind("click",C).unbind("mouseover",D).unbind("mouseout",E).css({cursor:"pointer",opacity:1}).mouseover(D).mouseout(E).click(C);else return;else if(0<p)p--,0===p&&l.unbind("click",C).unbind("mouseover",D).unbind("mouseout",E).removeClass("cj-thumb-arrow-hover").css({cursor:"auto",opacity:Pb}), v.unbind("click",C).unbind("mouseover",D).unbind("mouseout",E).css({cursor:"pointer",opacity:1}).mouseover(D).mouseout(E).click(C);else return;H.stop(!0).animate({marginLeft:p*-ea},300)}function D(a){a.stopPropagation();b(this).addClass("cj-thumb-arrow-hover")}function E(a){a.stopPropagation();b(this).removeClass("cj-thumb-arrow-hover")}function zc(a){for(var b=q;b--;)b!==a?(Q[b].stop(!0,!0).css("opacity",0),r[b].stop(!0,!0).css("cursor","pointer").mouseover(tb).mouseout(ub)):(Q[b].stop(!0,!0).css("opacity", jc),r[b].unbind("mouseover",tb).unbind("mouseout",ub).css("cursor","auto"),!Y&&Sa&&(r[b].unbind("mousemove",Ra),K.stop(!0,!0).fadeOut(200)))}function fd(){Bb&&P?(null===L&&(L=b("<canvas />")),L.css({marginLeft:(ka>>1)-26,marginTop:(Ib>>1)-26}).appendTo(Q[c]),Xc()):Db=setTimeout(gc,hc)}function Xc(){gb=1;Ba=L[0];u=Ba.getContext("2d");Ba.width=51;Ba.height=51;u.lineWidth=10;u.strokeStyle="#000";Cb=setInterval(Dd,Ed)}function Dd(){md=nd+0.02*gb*Math.PI;u.clearRect(0,0,51,51);u.beginPath();u.arc(26,26, 13,nd,md,!1);u.stroke();u.save();100>gb?gb+=1:(clearInterval(Cb),u.closePath(),Ba=u=null,gc())}function Rc(){o.css({left:U-qc});B&&s.css({marginLeft:qc-nc})}function Nc(a){ra&&(j=qa.width()-od,j=Math.max(j,pd),U=j>>1,k=qa.height()-qd,Ca=k>>1);if("undefined"!==typeof g){var a="object"===typeof a?!0:!1,b=j/Ua,c=k/Va,e,f;a&&zb&&(zb=!1,g&&g.stop(!0,!0),m&&m.stop(!0,!0),w.stop(!0,!0),x.stop(!0,!0));Qa?(c=b>c?b:c,b=Math.ceil(Ua*c),c=Math.ceil(Va*c),$b?(b>j?e=b-j>>1:e=0,c>k?f=c-k>>1:f=0):f=e=0):(c=b>c?c: b,b=Math.ceil(Ua*c),c=Math.ceil(Va*c),j>b?e=-(j-b>>1):e=0,k>c?f=-(k-c>>1):f=0);1===F?(w.css({width:j,height:k}),g&&g.width(b).height(c).css({marginTop:-f,marginLeft:-e})):(x.css({width:j,height:k}),m&&m.width(b).height(c).css({marginTop:-f,marginLeft:-e}));a&&(g&&g.css("clip","auto"),m&&m.css("clip","auto"),bc?kd(!0):Eb&&Rc(),Lb&&(ba.css({width:j,height:k}),null!==Fa&&(e=U-(N>>1)+n,f=Ca-(V>>1)+T,Fa.css({left:e,top:f}),pa.css({left:e+N,top:f+V}))),Hb&&M.css({top:Ca-Sc+T,left:U-Tc+n}),Za&&Za.css({width:j, height:k}))}}var A=b("#cj-gallery");if(A.length){var jc=f.thumbHoverOpacity,ed=nb.videoFallbackSwf,hc=f.transitionDelay,Ac=f.categoryOpacity,ad=f.showInfoByDefault,wd=f.bgClickLoadsNext,Cd=f.hideThumbnails,vd=f.randomizeImages,Zc=f.keyboardControls,cb=nb.videoHeight,t=f.useDeepLink,N=nb.videoWidth,lc=f.maxThumbs,I=f.transitionTime,P=f.useThumbs,rd=f.autoPlay,ra=f.fullScreen,qd=f.offsetHeight,od=f.offsetWidth,n=f.offsetX,T=f.offsetY,sb,nc,yb,Kb,Pa,qc,$,dd,ja,ab,ea,jd,ld,ya,hd,id,Cb,Ga,gd,Ib,la,Q,mc, fb,ka,Y,ma,xa,rb,oc,fa,Qa,y,$b,pc,V,j,U,k,Ma,Va,u,wa,Qb,Za,M,Rb,Ba,Ua,g,m,va,Ab,Db,gb,Z,z,Ca,za,c,md,q,Oa,F=0,e=0,Na=0,p=0,pd=600,Pb=0.75,nd=1.5*Math.PI,Ed=hc/100,Bb=Modernizr.canvas,Fa=null,r=null,L=null,Ob=null,W=null,Nb=null,Qc=!1,Hb=!1,cc=!1,Aa=!1,Ea=!1,bc=!1,Lb=!1,Fb=!0,ob=!1,Xb=!1,Oc=!0,xc=!0,zb=!1,Bc=!1,na=!1,qb=[],Fc=[],Ec=[],ac=[],Cc=[],Yb=[],ia=[],Gc=[],Hc=[],Dc=[],ha=[],qa=b(window),Jb=b(document),R=b("body"),w=b("<div />"),x=b("<div />"),sa=b(".cj-up-icon"),rc=b("#cj-bg-images").children("ul"), da=b(".cj-play-icon"),Wa=b(".cj-left-icon"),aa=b(".cj-info-icon"),Xa=b(".cj-right-icon"),ca=b(".cj-pause-icon"),X=b(".cj-close-icon"),Gb=b("#cj-categories"),Ta=b("#cj-image-info"),Fd=b(".cj-close-info"),K=b("#cj-thumb-tooltip"),o=b("#cj-footer"),H=b("#cj-thumbnails"),db=b("#cj-vid-controls"),bd=b("#cj-image-info-text"),oa=b("#cj-video-player"),s=b("#cj-gallery-controls"),pa=b("<div />").addClass("cj-video-close"),ba=b("<div />").addClass("cj-video-lightbox").css({top:T,left:n});M=b("<div />").addClass("cj-video-button").appendTo(A); var v=b("<div />").addClass("cj-thumb-right").data("right",!0),l=b("<div />").addClass("cj-thumb-left").data("right",!1),Sc=parseInt(M.css("height"),10)>>1,Tc=parseInt(M.css("width"),10)>>1,sd=nb.autoPlayVideo?"1":"0",xb=ra?"fixed":"absolute",J=rd,ga=rc.length,Lc=b.browser.webkit,G=Gb.length,Gd=DetectTierIphone(),td=DetectTierTablet(),Eb=o.length,ec=Xa.length&&Wa.length;ab=da.length&&ca.length;var ic=X.length&&sa.length,B=s.length,Sa=f.useThumbToolTip&&K.length,vb=Ta.length&&bd.length,zd="http://player.vimeo.com/video{url}?title=0&byline=0&portrait=0&autoplay="+ sd,yd="http://www.youtube.com/embed/{url}?autoplay="+sd+"&autohide=1&hd=1&iv_load_policy=3&showinfo=0&showsearch=0&wmode=transparent";b.cjBgSlideshow.getPhone=function(){return Gd};b.cjBgSlideshow.getTablet=function(){return td};if(0!==ga){td&&b("head").append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />');f.disableRightClick&&Jb.bind("contextmenu",function(a){a.preventDefault()});Jb.find("#cj-preloader").length&&(Oa=b("#cj-preloader"));if(!P||!f.useCanvasAnimation)Bb= !1;H.length||(P=!1);0===lc&&(lc=999);var Sb,hb,ib,Tb,Ha,Ub,Vb,Ia,sc,jb,kb,Ja,lb,Ka,tc,mb,uc,La,ud=!1;if(b.browser.msie){var vc=parseInt(b.browser.version,10);ra&&7===vc&&(ud=!0);s.length&&8<vc&&s.addClass("cj-gc-fix");8===vc&&(Lc=!0)}1===ga&&G&&(Gb.css("display","none"),G=!1);rc.each(function(a){hb=[];ib=[];Sb=[];sc=[];lb=[];kb=[];Ja=[];b(this).children("li").each(function(a){Tb=b(this).find(".cj-large");Ha=b(this).find(".cj-thumb");Ub=b(this).find(".cj-video");Vb=b(this).find(".cj-info");Ia=b(this).find(".cj-link"); Tb.length?Tb.attr("title")&&(Sb[a]=Tb.attr("title")):Sb[a]="";if(Ha.length){if(Ha.attr("title")){sc[a]=Ha.attr("title");b.trim(Ha.text())!==""?hb[a]=Ha.html():hb[a]=""}}else{Yb[a]="";hb[a]=""}Vb.length?b.trim(Vb.text())!==""?kb[a]=Vb.html():kb[a]="":kb[a]="";Ub.length?Ub.attr("title")?lb[a]=Ub.attr("title"):lb[a]="":lb[a]="";if(Ia.length)if(Ia.attr("title")){ib[a]=Ia.attr("title");Ia.attr("data-rel")?Ja[a]=Ia.attr("data-rel"):Ja[a]="_parent"}else{ib[a]="";Ja[a]=""}else{ib[a]="";Ja[a]=""}});if(b(this).attr("class")){La= b(this).attr("class");if(La.search("fit")===-1){mb=true;jb=La.search("center")===-1?false:true}else{mb=false;jb=true}La.search("fade")!==-1||ud?Ka=0:La.search("slide")!==-1?La.search("over")===-1?Ka=1:Ka=2:Ka=3}else{Ka=mb=true;jb=false}uc=b(this).attr("title");b(this).removeAttr("title");ha[a]=uc.toLowerCase();G&&(ia[a]=b("<div />").addClass("cj-category").html(uc).data({id:a,stretch:mb,center:jb}).appendTo(Gb));if(b(this).attr("data-rel")){tc=b(this).attr("data-rel").split("x");ac[a]={width:parseInt(tc[0], 10),height:parseInt(tc[1],10)}}qb[a]=Sb;Ec[a]=kb;Cc[a]=Ka;Gc[a]=lb;Yb[a]=sc;Hc[a]=Ja;Fc[a]=ib;Dc[a]=hb});G||(Qa=mb,$b=jb);vb?Fd.click(wb):aa.length&&aa.hide();!G&&P?H.addClass("cj-no-categories"):!G&&(!P&&B)&&(s.css("height",s.height()+parseInt(s.css("padding-top"),10)),b("#cj-footer-container").addClass("cj-footer-controls-only"),X.length&&X.hide());Eb&&B&&(qc=o.outerWidth(!0)>>1,ic?(X.data("isOpen",!0).click(eb),sa.hide().data("isOpen",!1).click(eb)):(X.length&&X.hide(),sa.length&&sa.hide()));ab? (da.click(bb),ca.click(bb),rd?(da.hide(),ca.show()):(ca.hide(),da.show())):(ca.length&&ca.hide(),da.length&&da.hide());ec||(Xa.length&&Xa.hide(),Wa.length&&Wa.hide());nc=B?s.outerWidth(!0)>>1:null;M.css({display:"none",visibility:"visible"});catLeg=qb.length-1;w.css({position:xb,overflow:"hidden",zIndex:-1E4});x.css({position:xb,overflow:"hidden",zIndex:-1E4});ra?(j=qa.width()-od,j=Math.max(j,pd),k=qa.height()-qd,w.css({top:T,left:n}),x.css({top:T,left:n}),A.css({top:T,left:n}),R.prepend(w).prepend(x).append(l).append(v)): (j=f.customWidth,k=f.customHeight,A.append(l).append(v),A.css({width:j,height:k,position:"relative"}).prepend(w).prepend(x),b("<div />").css({width:j,height:k,position:"absolute",backgroundColor:f.backgroundColor?f.backgroundColor:"#000",zIndex:-10001}).prependTo(A));Za=b("<div />").css({width:j,height:k,position:"fixed"}).addClass("cj-bg-click").prependTo(A);U=j>>1;Ca=k>>1;jd=parseInt(l.css("height"),10)>>1;ld=parseInt(l.css("width"),10);t?(b.address.internalChange(O),b.address.externalChange(wc), cjAjaxVersion&&b.address.update()):(c=0,wc());ra&&qa.resize(Nc);rc=f=null}b.cjBgSlideshow.getCatOn=function(){return e};b.cjBgSlideshow.getIsOn=function(){return c};b.cjBgSlideshow.getHash=function(){return z};b.cjBgSlideshow.setURL=function(a){t&&"undefined"!==typeof a&&b.address.value(a)};b.cjBgSlideshow.setCategory=function(a,d){"undefined"!==typeof a&&(-1<a&&a<ga)&&(t?isNaN(d)?b.address.value(ha[a]):-1<d&&d<q&&b.address.value(ha[a]+"/"+d):(e=a,typeof d===Number&&(c=d),O()))};b.cjBgSlideshow.setImage= function(a){"undefined"!==typeof a&&(-1<a&&a<q)&&(t?b.address.value(z.split("/").join("")+"/"+(a+1).toString()):(c=a,O()))};b.cjBgSlideshow.addCallback=function(a,b){if("undefined"!==typeof a&&"undefined"!==typeof b)switch(a.toLowerCase()){case "categorychange":sb=b;break;case "imagechange":yb=b;break;case "imageloaded":Kb=b}};b.cjBgSlideshow.removeCallback=function(a){if("undefined"!==typeof a)switch(a.toLowerCase()){case "categorychange":sb=null;break;case "imagechange":yb=null;break;case "imageloaded":Kb= null}}}}})(jQuery);